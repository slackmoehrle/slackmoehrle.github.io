# 预制资源（Prefab）

对于项目中会重复生成的节点，使用预制件是很有必要的。

## 创建预制件

在场景中将节点编辑好之后，直接将节点从 `层级管理器` 拖到  `资源管理器` 中即可完成预制件的创建。<br>
完成创建后，原节点自动变为该预制件节点，呈现 `绿色`。

![](prefab/create-prefab.gif)

## 使用预制件

将节点从 `资源管理器` 拖到  `层级管理器` 或 `场景面板` 中可在场景中产生一个预制件节点。<br>
场景中的预制件节点对象，数据源来自预制件资源的反序列化，彼此是完全独立的，可多个并存，并且与预制件资源无数据上关联，资源与节点各自的改动，除非使用了 `从资源还原` 或 `更新到资源` (下面会表述)，否则不会互相影响。

![](prefab/use-prefab.gif)


## 场景中编辑预制件节点


`层级管理器` 选中预制件节点，在 `属性检查器` 中顶部有可操作的几个按钮，鼠标上移会有该功能的文字提示，以下对红框区按钮的功能做说明：

![](prefab/edit-prefab.png)

### 第一个，还原为普通节点

预制件节点可变为普通节点，即完全脱离和资源的关系。在顶级菜单 `编辑` 中有此功能。

### 第二个，将节点关联到另一个预制件资源

作为节点重新关联资源的一种方式，需要先在 `资源管理器` 选中一个预制件资源，再在 `层级管理器` 选中预制件节点，就可以重新关联了。在顶级菜单 `编辑` 中有此功能。

### 第三个，定位资源

便于快速在 `资源管理器` 中定位到预制件资源，资源多时，效率较高。

### 第四个，从资源还原

可重新从资源反序列化出一个节点对象，替换现有节点，此操作不会改变现有节点的 uuid。一般用在节点与资源同步，或更正错误的情况下。

### 第五个，更新到资源

预制件节点有新的修改，同时想更新到关联的资源，可用此按钮功能。


## 预制件节点的状态

预制件节点在 `属性检查器` 呈现 `绿色` 表示与资源关联正常；呈现 `红色` 表示关联的资源不存在了。


## 进入预制件编辑模式

`资源管理器` 中双击预制件资源可从场景编辑模式切换到预制件编辑模式：
此时可以在编辑器中编辑预制件资源，编辑完成之后，点击场景编辑器中的 `保存 Prefab` 即可保存编辑后的预制件资源，之后点击 `关闭` 可返回场景编辑模式。

![](prefab/edit-prefab.gif)

目前预制件节点与资源没有自动同步的功能，需要手动同步：
此种方式修改预制件资源，在保存之后并不会影响已存在的预制件节点，如果需要更新场景中的其他此类预制件节点，则节点所在的场景没有打开的需要打开处于编辑状态，再选中预制件节点，在 `属性检查器` 中点击顶部的 `从资源还原` 按钮，更新节点，最后保存场景，完成资源同步到节点。



